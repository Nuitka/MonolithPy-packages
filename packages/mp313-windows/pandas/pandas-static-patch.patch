diff --git a/pandas/_libs/include/pandas/portable.h b/pandas/_libs/include/pandas/portable.h
index 5a5b39e..b83d58f 100644
--- a/pandas/_libs/include/pandas/portable.h
+++ b/pandas/_libs/include/pandas/portable.h
@@ -40,45 +40,150 @@ The full license is in the LICENSE file, distributed with this software.
 #  ifndef ENABLE_INTSAFE_SIGNED_FUNCTIONS
 #    define ENABLE_INTSAFE_SIGNED_FUNCTIONS
 #  endif
-#  include <intsafe.h>
-#  define checked_add(a, b, res)                                               \
-    _Generic((res),                                                            \
-        int *: IntAdd,                                                         \
-        unsigned int *: UIntAdd,                                               \
-        long *: LongAdd,                                                       \
-        unsigned long *: ULongAdd,                                             \
-        long long *: LongLongAdd,                                              \
-        unsigned long long *: ULongLongAdd,                                    \
-        short *: ShortAdd,                                                     \
-        unsigned short *: UShortAdd)(a, b, res)
-
-#  define checked_sub(a, b, res)                                               \
-    _Generic((res),                                                            \
-        int *: IntSub,                                                         \
-        unsigned int *: UIntSub,                                               \
-        long *: LongSub,                                                       \
-        unsigned long *: ULongSub,                                             \
-        long long *: LongLongSub,                                              \
-        unsigned long long *: ULongLongSub,                                    \
-        short *: ShortSub,                                                     \
-        unsigned short *: UShortSub)(a, b, res)
-
-#  define checked_mul(a, b, res)                                               \
-    _Generic((res),                                                            \
-        int *: IntMult,                                                        \
-        unsigned int *: UIntMult,                                              \
-        long *: LongMult,                                                      \
-        unsigned long *: ULongMult,                                            \
-        long long *: LongLongMult,                                             \
-        unsigned long long *: ULongLongMult,                                   \
-        short *: ShortMult,                                                    \
-        unsigned short *: UShortMult)(a, b, res)
+#include <limits.h>
+
+// Unfortunately we have to implement overflow-safe arithmetic ourselves
+// since intsafe.h has linkage issues...
+
+static inline int checked_add_int64(long long a, long long b, long long *res) {
+  unsigned long long ua = (unsigned long long)a;
+  unsigned long long ub = (unsigned long long)b;
+  unsigned long long ures = ua + ub;
+  *res = (long long)ures;
+
+  // Check for overflow
+  if (a >= 0 && b >= 0 && *res < 0) return 1;  // positive overflow
+  if (a < 0 && b < 0 && *res >= 0) return 1;   // negative overflow
+  return 0;
+}
+
+static inline int checked_sub_int64(long long a, long long b, long long *res) {
+  unsigned long long ua = (unsigned long long)a;
+  unsigned long long ub = (unsigned long long)b;
+  unsigned long long ures = ua - ub;
+  *res = (long long)ures;
+
+  // Check for overflow
+  if (a >= 0 && b < 0 && *res < 0) return 1;   // positive overflow
+  if (a < 0 && b >= 0 && *res >= 0) return 1;  // negative overflow
+  return 0;
+}
+
+static inline int checked_mul_int64(long long a, long long b, long long *res) {
+  // Use 128-bit multiplication if available, otherwise check bounds
+  if (a == 0 || b == 0) {
+    *res = 0;
+    return 0;
+  }
+
+  // Check if multiplication would overflow
+  if (a > 0) {
+    if (b > 0) {
+      if (a > LLONG_MAX / b) return 1;
+    } else {
+      if (b < LLONG_MIN / a) return 1;
+    }
+  } else {
+    if (b > 0) {
+      if (a < LLONG_MIN / b) return 1;
+    } else {
+      if (a != 0 && b < LLONG_MAX / a) return 1;
+    }
+  }
+
+  *res = a * b;
+  return 0;
+}
+
+static inline int checked_add_int32(long a, long b, long *res) {
+  long long result = (long long)a + (long long)b;
+  if (result > LONG_MAX || result < LONG_MIN) return 1;
+  *res = (long)result;
+  return 0;
+}
+
+static inline int checked_sub_int32(long a, long b, long *res) {
+  long long result = (long long)a - (long long)b;
+  if (result > LONG_MAX || result < LONG_MIN) return 1;
+  *res = (long)result;
+  return 0;
+}
+
+static inline int checked_mul_int32(long a, long b, long *res) {
+  long long result = (long long)a * (long long)b;
+  if (result > LONG_MAX || result < LONG_MIN) return 1;
+  *res = (long)result;
+  return 0;
+}
+
+static inline int checked_add_int(int a, int b, int *res) {
+  long long result = (long long)a + (long long)b;
+  if (result > INT_MAX || result < INT_MIN) return 1;
+  *res = (int)result;
+  return 0;
+}
+
+static inline int checked_sub_int(int a, int b, int *res) {
+  long long result = (long long)a - (long long)b;
+  if (result > INT_MAX || result < INT_MIN) return 1;
+  *res = (int)result;
+  return 0;
+}
+
+static inline int checked_mul_int(int a, int b, int *res) {
+  long long result = (long long)a * (long long)b;
+  if (result > INT_MAX || result < INT_MIN) return 1;
+  *res = (int)result;
+  return 0;
+}
+
+static inline int checked_add_short(short a, short b, short *res) {
+  int result = (int)a + (int)b;
+  if (result > SHRT_MAX || result < SHRT_MIN) return 1;
+  *res = (short)result;
+  return 0;
+}
+
+static inline int checked_sub_short(short a, short b, short *res) {
+  int result = (int)a - (int)b;
+  if (result > SHRT_MAX || result < SHRT_MIN) return 1;
+  *res = (short)result;
+  return 0;
+}
+
+static inline int checked_mul_short(short a, short b, short *res) {
+  int result = (int)a * (int)b;
+  if (result > SHRT_MAX || result < SHRT_MIN) return 1;
+  *res = (short)result;
+  return 0;
+}
+
+#define checked_add(a, b, res)                                                 \
+  _Generic((res),                                                              \
+      int *: checked_add_int,                                                  \
+      long *: checked_add_int32,                                               \
+      long long *: checked_add_int64,                                          \
+      short *: checked_add_short)(a, b, res)
+
+#define checked_sub(a, b, res)                                                 \
+  _Generic((res),                                                              \
+      int *: checked_sub_int,                                                  \
+      long *: checked_sub_int32,                                               \
+      long long *: checked_sub_int64,                                          \
+      short *: checked_sub_short)(a, b, res)
+
+#define checked_mul(a, b, res)                                                 \
+  _Generic((res),                                                              \
+      int *: checked_mul_int,                                                  \
+      long *: checked_mul_int32,                                               \
+      long long *: checked_mul_int64,                                          \
+      short *: checked_mul_short)(a, b, res)
 
 #elif (defined(__has_builtin) && __has_builtin(__builtin_add_overflow)) ||     \
     __GNUC__ > 7
-#  define checked_add(a, b, res) __builtin_add_overflow(a, b, res)
-#  define checked_sub(a, b, res) __builtin_sub_overflow(a, b, res)
-#  define checked_mul(a, b, res) __builtin_mul_overflow(a, b, res)
+#define checked_add(a, b, res) __builtin_add_overflow(a, b, res)
+#define checked_sub(a, b, res) __builtin_sub_overflow(a, b, res)
+#define checked_mul(a, b, res) __builtin_mul_overflow(a, b, res)
 #else
 _Static_assert(0,
                "Overflow checking not detected; please try a newer compiler");
diff --git a/pandas/_libs/include/pandas/vendored/ujson/lib/ultrajson.h b/pandas/_libs/include/pandas/vendored/ujson/lib/ultrajson.h
index 3a8bf82..3c4ed09 100644
--- a/pandas/_libs/include/pandas/vendored/ujson/lib/ultrajson.h
+++ b/pandas/_libs/include/pandas/vendored/ujson/lib/ultrajson.h
@@ -93,7 +93,7 @@ typedef unsigned __int16 JSUTF16;
 typedef unsigned __int32 JSUTF32;
 typedef __int64 JSLONG;
 
-#  define EXPORTFUNCTION __declspec(dllexport)
+#  define EXPORTFUNCTION
 
 #  define FASTCALL_MSVC __fastcall
 
